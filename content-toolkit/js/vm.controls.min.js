ko.bindingHandlers.slideVisible={init:function(e,a){var t=a();$(e).toggle(ko.utils.unwrapObservable(t))},update:function(e,a){var t=a();ko.utils.unwrapObservable(t)?$(e).slideDown(200):$(e).slideUp(200)}},ko.bindingHandlers.fadeVisible={init:function(e,a){var t=a();$(e).toggle(ko.utils.unwrapObservable(t))},update:function(e,a){var t=a();ko.utils.unwrapObservable(t)?$(e).stop(!0,!0).fadeIn(200):$(e).hide()}};var ResultViewModel=function(e){this.selected=ko.observable(!1),ko.mapping.fromJS(e.data,{},this)},controlsMappingOptions={result:{create:function(e){return new ResultViewModel(e)}}},partsMapping={create:function(e){return new partModel(e.data)}},partModel=function(e){ko.mapping.fromJS(e,{},this),this.detailView=ko.observable(!1),this.quantity=ko.observable(1),this.relatedSeries=ko.computed(function(){return"function"!=typeof this.relatedTo?null:ko.utils.arrayFilter(this.relatedTo(),function(e){return 1==e.type()})},this),this.relatedModels=ko.computed(function(){return"function"!=typeof this.relatedTo?null:ko.utils.arrayFilter(this.relatedTo(),function(e){return 2==e.type()})},this),this.relatedParts=ko.computed(function(){return"function"!=typeof this.relatedTo?null:ko.utils.arrayFilter(this.relatedTo(),function(e){return 3==e.type()})},this),this.image1Thumb=ko.computed(function(){return"function"!=typeof this.image1?null:null!==this.image1()?this.image1().replace("orig","400x200"):null},this),this.image2Thumb=ko.computed(function(){return"function"!=typeof this.image2?null:null!==this.image2()?this.image2().replace("orig","400x200"):null},this),this.drawingThumb=ko.computed(function(){return"function"!=typeof this.drawing?null:null!==this.drawing()?this.drawing().replace("orig","400x200"):null},this),this.generateSpecificationsTable=ko.computed(function(){var e=[],a='<table class="table table-bordered"><tbody>',t=[],l="";return"undefined"!=typeof this.specifications&&(t=this.specifications()),$.each(t,function(a,t){l+='<th class="row-title">'+t.label()+"</th><td>"+t.value()+" "+t.unit()+"</td>",1==a%2&&(e.push(l),l="")}),1===t.length%2&&(l+='<td colspan="2">&nbsp;</td>',e.push(l)),a+=e.join("</tr><tr>")+"</tbody></table>"},this)},ControlsViewModel=function(e){var a=this;a.pullingData=!1,ko.mapping.fromJS(e,controlsMappingOptions,this),a.searchType=ko.observable("replacementPart"),a.searchDelay=0,a.parts=ko.observableArray(),a.partDetails=ko.observableArray(),a.partDetailsCache=[],a.partDetailsPrint=ko.observableArray([]),a.printOptions=ko.observableArray(["productdescription","specifications","drawings"]),a.searching=ko.observable(!1),a.firstLoad=ko.observable(!0),a.noResults=ko.observable(!1),a.partType=ko.observable("unipunch"),a.partTypeNames={unittool:"Unittool",strippit:"Strippit","pierce-all":"Pierce-All"},a.systemType=ko.observable("cframetooling"),a.searchUnitNumber=ko.observable(""),a.searchPartNumber=ko.observable(""),a.searchSubmittedPartType=ko.observable(""),a.searchSubmittedTerm=ko.observable(""),a.punchType=ko.observable(),a.punchShapeType=ko.observable(),a.materialType=ko.observable(),a.holeShape=ko.observable(),a.holeDiameter=ko.observable(),a.holeShapedType=ko.observable(),a.thickness=ko.observable(),a.thicknessUnit=ko.observable("inches"),a.shapeWidth=ko.observable(0),a.shapeHeight=ko.observable(0),a.tubingMax=ko.observable(),a.notchingType=ko.observable(),a.cutoffType=ko.observable(),a.specialtyType=ko.observable(),a.matchedHolders=ko.observableArray(),a.mountingMethod=ko.observable(),a.catalogTaxonomy=ko.observable(),a.favoritesList=ko.observableArray([]),a.favoritesListIds=ko.computed(function(){var e=[];return $.each(a.favoritesList(),function(a,t){e.push(t.itemId())}),e}),a.favoritesListSend=ko.computed(function(){var e=[];return $.each(a.favoritesList(),function(a,t){e.push([t.itemId(),t.quantity()])}),e}),a.interchangeBrands=ko.observableArray(),a.selectedInterchangeBrand=ko.observable(),a.thicknessInchesValues=ko.observableArray([{value:"0.03125",label:'0.03125"'},{value:"0.040",label:'0.040"'},{value:"0.0625",label:'0.0625"'},{value:"0.0937",label:'0.0937"'},{value:"0.1250",label:'0.1250"'},{value:"0.1562",label:'0.1562"'},{value:"0.1875",label:'0.1875"'},{value:"0.2187",label:'0.2187"'},{value:"0.2500",label:'0.2500"'},{value:"0.2812",label:'0.2812"'},{value:"0.3125",label:'0.3125"'},{value:"0.3437",label:'0.3437"'},{value:"0.3750",label:'0.3750"'},{value:"0.4062",label:'0.4062"'},{value:"0.4375",label:'0.4375"'},{value:"0.4687",label:'0.4687"'},{value:"0.5000",label:'0.5000"'},{value:"0.5312",label:'0.5312"'},{value:"0.5625",label:'0.5625"'},{value:"0.5937",label:'0.5937"'},{value:"0.6250",label:'0.6250"'},{value:"0.6562",label:'0.6562"'},{value:"0.6875",label:'0.6875"'},{value:"0.7187",label:'0.7187"'},{value:"0.7500",label:'0.7500"'}]),a.thicknessInches=ko.observable(a.thicknessInchesValues()[0].value),a.thicknessMillimetersValues=ko.observableArray([{value:"1",label:"1 mm"},{value:"2",label:"2 mm"},{value:"3",label:"3 mm"},{value:"4",label:"4 mm"},{value:"5",label:"5 mm"},{value:"6",label:"6 mm"},{value:"7",label:"7 mm"},{value:"8",label:"8 mm"},{value:"9",label:"9 mm"},{value:"10",label:"10 mm"},{value:"11",label:"11 mm"},{value:"12",label:"12 mm"},{value:"13",label:"13 mm"},{value:"14",label:"14 mm"},{value:"15",label:"15 mm"},{value:"16",label:"16 mm"},{value:"17",label:"17 mm"},{value:"18",label:"18 mm"},{value:"19",label:"19 mm"}]),a.thicknessMillimeters=ko.observable(a.thicknessMillimetersValues()[0].value),a.thicknessGaugeValues=ko.observableArray([{value:"3",label:"3 Ga"},{value:"4",label:"4 Ga"},{value:"5",label:"5 Ga"},{value:"6",label:"6 Ga"},{value:"7",label:"7 Ga"},{value:"8",label:"8 Ga"},{value:"9",label:"9 Ga"},{value:"10",label:"10 Ga"},{value:"11",label:"11 Ga"},{value:"12",label:"12 Ga"},{value:"13",label:"13 Ga"},{value:"14",label:"14 Ga"},{value:"15",label:"15 Ga"},{value:"16",label:"16 Ga"},{value:"17",label:"17 Ga"},{value:"18",label:"18 Ga"},{value:"19",label:"19 Ga"},{value:"20",label:"20 Ga"},{value:"21",label:"21 Ga"},{value:"22",label:"22 Ga"},{value:"23",label:"23 Ga"},{value:"24",label:"24 Ga"}]),a.thicknessGauge=ko.observable(a.thicknessGaugeValues()[0].value),a.thicknessUnit.subscribe(function(e){switch(e){case"37":a.thickness(a.thicknessInches());break;case"38":a.thickness(a.thicknessMillimeters());break;case"39":a.thickness(a.thicknessGauge())}}),a.thicknessInches.subscribe(function(e){a.thickness(e)}),a.thicknessMillimeters.subscribe(function(e){a.thickness(e)}),a.thicknessGauge.subscribe(function(e){a.thickness(e)}),a.roundDiameters=ko.observableArray([{value:"0.0937",label:'0.0937"'},{value:"0.1250",label:'0.1250"'},{value:"0.1562",label:'0.1562"'},{value:"0.1875",label:'0.1875"'},{value:"0.2187",label:'0.2187"'},{value:"0.2500",label:'0.2500"'},{value:"0.2812",label:'0.2812"'},{value:"0.3125",label:'0.3125"'},{value:"0.3437",label:'0.3437"'},{value:"0.3750",label:'0.3750"'},{value:"0.4062",label:'0.4062"'},{value:"0.4375",label:'0.4375"'},{value:"0.4687",label:'0.4687"'},{value:"0.5000",label:'0.5000"'},{value:"0.5312",label:'0.5312"'},{value:"0.5625",label:'0.5625"'},{value:"0.5937",label:'0.5937"'},{value:"0.6250",label:'0.6250"'},{value:"0.6562",label:'0.6562"'},{value:"0.6875",label:'0.6875"'},{value:"0.7187",label:'0.7187"'},{value:"0.7500",label:'0.7500"'},{value:"0.7812",label:'0.7812"'},{value:"0.8125",label:'0.8125"'},{value:"0.8437",label:'0.8437"'},{value:"0.8750",label:'0.8750"'},{value:"0.9062",label:'0.9062"'},{value:"0.9375",label:'0.9375"'},{value:"0.9687",label:'0.9687"'},{value:"1.0000",label:'1.0000"'},{value:"1.1250",label:'1.1250"'},{value:"1.2500",label:'1.2500"'},{value:"1.3750",label:'1.3750"'},{value:"1.5000",label:'1.5000"'},{value:"1.6250",label:'1.6250"'},{value:"1.7500",label:'1.7500"'},{value:"1.8750",label:'1.8750"'},{value:"2.0000",label:'2.0000"'},{value:"2.1250",label:'2.1250"'},{value:"2.2500",label:'2.2500"'},{value:"2.3750",label:'2.3750"'},{value:"2.5000",label:'2.5000"'},{value:"2.6250",label:'2.6250"'},{value:"2.7500",label:'2.7500"'},{value:"2.8750",label:'2.8750"'},{value:"3.0000",label:'3.0000"'},{value:"3.1250",label:'3.1250"'},{value:"3.2500",label:'3.2500"'},{value:"3.3750",label:'3.3750"'},{value:"3.5000",label:'3.5000"'},{value:"3.6250",label:'3.6250"'},{value:"3.7500",label:'3.7500"'},{value:"3.8750",label:'3.8750"'},{value:"4.0000",label:'4.0000"'},{value:"4.1250",label:'4.1250"'},{value:"4.2500",label:'4.2500"'},{value:"4.3750",label:'4.3750"'},{value:"4.5000",label:'4.5000"'},{value:"4.6250",label:'4.6250"'},{value:"4.7500",label:'4.7500"'},{value:"4.8750",label:'4.8750"'},{value:"5.0000",label:'5.0000"'},{value:"Custom",label:"Custom"}]),a.maxTubingDimensions=ko.observableArray([{id:.5625,label:'9/16"'},{id:1,label:'1"'},{id:1.25,label:'1 1/4"'},{id:2.375,label:'2 3/8"'},{id:4,label:"Custom"}]),a.notchingTypes=ko.observableArray([{id:27,label:"Corner Notching"},{id:28,label:"Edge Notching"},{id:29,label:"Vee Notching"},{id:30,label:"Radius Corners"},{id:31,label:"Custom Notching"}]),a.cutoffTypes=ko.observableArray([{id:41,label:"Angled"},{id:42,label:"Flat Stock"},{id:43,label:"Custom"}]),a.specialtyTypes=ko.observableArray([{id:44,label:"Horizontal Punching"},{id:45,label:"Close Center-to-Center"},{id:46,label:"Unlimited Depth Punching"},{id:47,label:"Feed Clearance Units"}]),a.accessoriesSharpen=ko.observableArray([{id:"71",label:"Punch & Die Sharpener"},{id:"72",label:"Grinding Wheel/Diamond Dresser"},{id:"73",label:"Spray Mist Attachment"},{id:"74",label:"Safety Shield"},{id:"75",label:"Punch & Die Gauges"}]),a.accessoriesPunchDieLife=ko.observableArray([{id:"77",label:"Punch Shims"},{id:"78",label:"Die Shims"}]),a.accessoriesUse=ko.observable("punchesanddies"),a.accessoriesType=ko.observable(),a.controlAreas=ko.dependentObservable(function(){var e=ko.utils.arrayMap(a.result(),function(e){return e.area()});return ko.utils.arrayGetDistinctValues(e)},a),a.searchType.subscribe(function(){a.hideDetails()}),a.partType.subscribe(function(){a.searchUnitNumber(""),a.searchPartNumber("")}),a.searchUnitNumber.subscribe(function(){""!==a.searchUnitNumber()&&a.searchPartNumber("")}),a.searchPartNumber.subscribe(function(){""!==a.searchPartNumber()&&a.searchUnitNumber("")}),a.showCustom=ko.computed(function(){var e=a.holeShapedType()&&"18"==a.holeShapedType().taxonomyId(),t=a.thicknessUnit()&&"40"==a.thicknessUnit();return e||t}),a.resetSearch=function(){document.location.reload(!0)},a.resetValues=function(){a.pullingData=!1,ko.mapping.fromJS(e,controlsMappingOptions,this),a.searchType("replacementPart"),a.parts(),a.searching(!1),a.noResults(!1),a.partType("unipunch"),a.systemType("cframetooling"),a.searchUnitNumber(""),a.searchPartNumber(""),a.punchType(),a.punchShapeType(),a.materialType(),a.holeShape(),a.holeDiameter(0),a.thickness(),a.thicknessUnit("37"),a.shapeWidth(0),a.shapeHeight(0),a.matchedHolders(),a.mountingMethod(),a.accessoriesUse("punchesanddies")},a.hideDetails=function(){a.partDetails([]),$(document).trigger("parts-details-close")},a.displayDetails=function(e){if(postData={itemId:e},ajaxUrl="/DesktopModules/PartsBookFrontEnd/API/PartsBookFrontEnd/searchResultsDetail",$(document).trigger("parts-details-start"),"undefined"!=typeof a.partDetailsCache[postData.itemId]){var t=ko.mapping.fromJS(a.partDetailsCache[postData.itemId],partsMapping);"function"==typeof t?a.partDetails(t()):a.partDetails([]),console.log("Details: ",a.partDetails())}else $.ajax({type:"POST",data:ko.toJSON(postData),contentType:"application/json",dataType:"json",url:ajaxUrl,success:function(e){console.log("Success getting details!",e),a.partDetailsCache[postData.itemId]=e.result;var t=ko.mapping.fromJS(e.result,partsMapping);"function"==typeof t?a.partDetails(t()):a.partDetails([])},error:function(){console.log("there was an error!")}})},a.updateResults=function(){if(a.pullingData)a.pullingData=!1;else{var e={},t="";switch(a.pullingData=!0,a.searchType()){case"replacementPart":t="/DesktopModules/PartsBookFrontEnd/API/PartsBookFrontEnd/upReplacementPartSearch",e.searchUnitNumber=a.searchUnitNumber(),e.searchPartNumber=a.searchPartNumber(),e.partType=a.partType(),a.searchSubmittedPartType(a.partType()),a.searchSubmittedTerm(a.searchUnitNumber());break;case"toolingOptions":t="/DesktopModules/PartsBookFrontEnd/API/PartsBookFrontEnd/upToolingSearch",e.punchType=a.punchType().taxonomyId(),e.materialType=a.materialType()?a.materialType().taxonomyId():0,e.thickMeasure=a.thicknessUnit(),e.thickValue=a.thickness(),e.shapeType="round"===a.holeShape()?8:9,e.holeShape=a.holeShapedType()?a.holeShapedType().taxonomyId():0,e.roundDiameter=a.holeDiameter(),e.holeWidth=a.shapeWidth(),e.holeLength=a.shapeHeight(),e.tubingMax=a.tubingMax().id,e.notchingType=a.notchingType().id,e.cutoffType=a.cutoffType().id,e.specialtyType=a.specialtyType().id,a.searchSubmittedPartType(""),a.searchSubmittedTerm("");break;case"mountingSystem":t="/DesktopModules/PartsBookFrontEnd/API/PartsBookFrontEnd/upTaxonomySearch",e.taxonomyId=[Math.floor(a.mountingMethod().taxonomyId())],a.searchSubmittedPartType(""),a.searchSubmittedTerm("");break;case"accessories":t="/DesktopModules/PartsBookFrontEnd/API/PartsBookFrontEnd/upTaxonomySearch",e.taxonomyId=[Math.floor(a.accessoriesType().id)],a.searchSubmittedPartType(""),a.searchSubmittedTerm("");break;case"catalog":"string"==typeof a.catalogTaxonomy()?(t="/DesktopModules/PartsBookFrontEnd/API/PartsBookFrontEnd/upInterchangeBrandSearch",e.brand=a.catalogTaxonomy()):(t="/DesktopModules/PartsBookFrontEnd/API/PartsBookFrontEnd/upTaxonomySearch",e.taxonomyId=a.getTaxonomyIds(a.catalogTaxonomy())),a.searchSubmittedPartType(""),a.searchSubmittedTerm("")}$(document).trigger("parts-data-start"),a.firstLoad(!1),a.searching(!0),$.ajax({type:"POST",data:ko.toJSON(e),contentType:"application/json",dataType:"json",url:t,success:function(e){console.log("Results: ",e);var t=ko.mapping.fromJS(e.result,partsMapping);a.searching(!1),"function"==typeof t?a.parts(t()):a.parts([]),1===a.parts().length&&a.parts()[0].detailView(!0),a.pullingData=!1,$(document).trigger("parts-data-loaded")},error:function(){console.log("there was an error!")}})}},a.getByArea=function(e){var a=[],t=e instanceof Array;return ko.utils.arrayForEach(this.result(),function(l){if(t)for(var o=0,s=e.length;s>o;o+=1)l.area()==e[o]&&a.push(l);else(l.area()===e||"all"===e)&&a.push(l)}),a},a.getById=function(e){var a=[];return ko.utils.arrayForEach(this.result(),function(t){t.taxonomyId()===e&&(a=t)}),a},a.getTaxonomyIds=function(e){var a=[];return a.push(e.taxonomyId()),a},a.setPunchShapeType=function(e){a.punchShapeType(e)},a.setMountingMethod=function(e){a.mountingMethod(e)},a.setPunchType=function(e){a.punchType(e)},a.setThickness=function(e){a.thickness(e)},a.setTubingMax=function(e){a.tubingMax(e)},a.setNotchingType=function(e){a.notchingType(e)},a.setCutoffType=function(e){a.cutoffType(e)},a.setSpecialtyType=function(e){a.specialtyType(e)},a.setAccessoriesType=function(e){a.accessoriesType(e)},a.selectedControls=ko.computed(function(){return ko.utils.arrayFilter(this.result(),function(e){return e.selected()})},a),a.setCatalogTaxonomies=function(e){switch(e.taxonomyId()){case 25:return location="/SystemCapabilities/TypicalWorkDone/Forming.aspx",void 0}a.catalogTaxonomy(e),clearTimeout(a.searchDelay),a.searchDelay=setTimeout(function(){a.updateResults()},500)},a.addToFavorites=function(e){console.log("Add to favorites: ",a.favoritesListIds().indexOf(e.itemId()));var t=ko.mapping.fromJS(e,partsMapping);-1!==a.favoritesListIds().indexOf(t.itemId())?a.favorites.remove(t):a.favorites.add(t),auth?$.removeCookie("partsbook_favorites"):$.cookie("partsbook_favorites",a.favoritesListIds())},a.getSpecification=function(e,a,t,l){var o="";return"undefined"==typeof t&&(t=""),"undefined"==typeof l&&(l=""),$.each(e.specifications(),function(e,s){s.label()===a&&(o=t+s.value()+s.unit()+l)}),o},a.getItemNumber=function(e,a){var t="";switch(a.type()){case 1:case 3:t=e.itemNumber1();break;case 2:t=e.itemNumber2()}return t},a.favorites={init:function(){if(auth&&void 0!==$.cookie("partsbook_favorites")){var e="/DesktopModules/PartsBookFrontEnd/API/PartsBookFrontEnd/searchResults",t={itemIds:$.cookie("partsbook_favorites").split(",")};$.ajax({type:"POST",data:ko.toJSON(t),contentType:"application/json",dataType:"json",url:e,success:function(e){$(document).trigger("favorites-initialized");var t=ko.mapping.fromJS(e.result,partsMapping);a.searching(!1),"function"==typeof t?a.favoritesList(t()):a.favoritesList([])},error:function(){}})}else console.log("not cookie!")},add:function(e){a.favoritesList.push(e)},remove:function(e){a.favoritesList.remove(a.favorites.getbyid(e.itemId()))},save:function(){var e="/DesktopModules/PartsBookFrontEnd/API/PartsBookFrontEnd/upWishlistSave",t={itemIds:a.favoritesListSend()};$.ajax({type:"POST",data:ko.toJSON(t),contentType:"application/json",dataType:"json",url:e,success:function(){$(document).trigger("favorites-saved")},error:function(){}})},load:function(){var e="/DesktopModules/PartsBookFrontEnd/API/PartsBookFrontEnd/upWishlistSave",t={itemIds:[]};$.ajax({type:"POST",data:ko.toJSON(t),contentType:"application/json",dataType:"json",url:e,success:function(e){$(document).trigger("favorites-loaded");var t=ko.mapping.fromJS(e.result,partsMapping);a.searching(!1),"function"==typeof t?a.favoritesList(t()):a.favoritesList([])},error:function(){}})},getbyid:function(e){var t=!1;return $.each(a.favoritesList(),function(a,l){l.itemId()===e&&(t=l)}),t},email:function(){location="/EmailWishList.aspx"}},a.printDialog={showHideList:function(e,a){var t=$(a.target),l=t.parent("li");t.toggleClass("expanded"),l.find("ul").slideToggle(200)},selectAll:function(e,t){var l=$(t.target),o=l.closest(".print-options");a.printOptions([]),o.find(".checkbox").removeClass("selected").addClass("selected").each(function(e,t){void 0!==$(t).data("option")&&a.printOptions.push($(t).data("option"))})},deSelectAll:function(e,t){var l=$(t.target),o=l.closest(".print-options");a.printOptions([]),o.find(".checkbox").removeClass("selected")},selectOption:function(e,t){var l=$(t.target),o=l.data("option");void 0!==l.data("option")&&(-1!==a.printOptions.indexOf(o)?a.printOptions.remove(o):a.printOptions.push(o))},selectSubOptions:function(e,t){var l=$(t.target),o=l.closest("li");l.toggleClass("selected"),l.hasClass("selected")?o.find(".checkbox").removeClass("selected").addClass("selected").each(function(e,t){void 0!==$(t).data("option")&&a.printOptions.push($(t).data("option"))}):o.find(".checkbox").removeClass("selected").each(function(e,t){void 0!==$(t).data("option")&&a.printOptions.remove($(t).data("option"))})},openPrintView:function(e){a.partDetailsPrint([e]),$("#printModal").modal("hide")}},a.findToolingOptions=function(){},a.doAfterRender=function(){setTimeout(function(){$(document).trigger("controls-loaded")},0)},a.afterDetailsRender=function(){$(document).trigger("details-rendered")},a.afterPartsRender=function(){setTimeout(function(){$(document).trigger("parts-rendered")},0)},a.afterDetailsPrintRender=function(){setTimeout(function(){$(document).trigger("details-print-rendered")},0)}};
